<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-progress/paper-progress.html">
<link rel="import" href="shared-styles.html">

<link rel="import" href="video-feed.html">
<link rel="import" href="instrument-cluster.html">

<dom-module id="robot-cockpit">
    <template>
        <style include="shared-styles">
            paper-progress.motor {
                --paper-progress-active-color: #e9d400;
            }
        </style>

        <p>Data: [[_stringify(data)]]</p>
        <video-feed feed-url="{{feedUrl}}"></video-feed>
        <instrument-cluster throttle="{{data.drive.throttle}}" orientation="{{data.drive.orientation}}"></instrument-cluster>

        <p>Left Motor: [[_command(data.vehicle.backLeft.command.value)]]</p>
        <paper-progress class="motor" value="[[data.vehicle.backLeft.speed]]" min="0" max="255"></paper-progress>

        <p>Right Motor: [[_command(data.vehicle.backRight.command.value)]]</p>
        <paper-progress class="motor" value="[[data.vehicle.backRight.speed]]" min="0" max="255"></paper-progress>
    </template>
    <script>
        class RobotCockpit extends Polymer.Element {
            static get is() {
                return 'robot-cockpit';
            }

            static get properties() {
                return {
                    feedUrl: String,
                    data: Object
                }
            }

            _stringify(object) {
                return JSON.stringify(object);
            }

            _command(value) {
                if  (value === 1) {
                    return 'Forward';
                } else if (value === 2) {
                    return 'Backward';
                } else if (value === 3) {
                    return 'Brake';
                } else if (value === 4) {
                    return 'Release';
                } else {
                    return 'Unknown';
                }
            }
        }

        customElements.define(RobotCockpit.is, RobotCockpit);
    </script>
</dom-module>
